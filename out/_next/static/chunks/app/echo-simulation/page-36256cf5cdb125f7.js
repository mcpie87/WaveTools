(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[102],{1910:(e,s,t)=>{Promise.resolve().then(t.bind(t,9656))},9656:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var r=t(5155),l=t(530);let a={flat_atk:1/13,flat_hp:1/13,flat_def:1/13,"atk%":1/13,"hp%":1/13,"def%":1/13,energy_regen:1/13,crit_hit:1/13,crit_damage:1/13,basic_attack_dmg_bonus:1/13,heavy_attack_dmg_bonus:1/13,resonance_skill_dmg_bonus:1/13,resonance_liberation_dmg_bonus:1/13},n=Object.keys(a),o={"+0":{tuners:0,exp:0},"+5":{tuners:10,exp:4400},"+10":{tuners:20,exp:16500},"+15":{tuners:30,exp:39600},"+20":{tuners:40,exp:79100},"+25":{tuners:50,exp:142600}};var c=t(2115);let d=e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),i=async(e,s,t)=>{let l={},n=s.filter(e=>e),c=t.filter(e=>e);console.log("Generate RESULTS nm",s,t),console.log("Generate RESULTS trim",n,c);let i=n.length;for(let s=0;s<e;++s)for(let e=i;e<=5;++e){if(e<c.length)continue;let s=function(e,s,t){for(let e=s.length;e<t;++e){let e=function(e){let s=0,t=[];for(let r in a)e.includes(r)||(t.push(r),s+=a[r]);if(0===t.length)throw Error("No more subs available");let r=Math.random()*s,l=0;for(let e=0;e<t.length;e++)if(r<=(l+=a[t[e]]))return t[e];throw Error("Unable to pick substat")}(s);s.push(e)}for(let t of e)if(!s.includes(t))return!1;return!0}(c,[...n],e);l[e]||(l[e]=0),s&&l[e]++}console.log("RESULTS",l);let h=[];for(let[s,t]of Object.entries(l)){let l=t/e;console.log("GENERATE ROWS CHANCE",s,t,l);let a="+"+5*Number(s),n="+"+5*i,c=1/l,x=c*(o[a].tuners-o[n].tuners),u=c*(o[a].exp-o[n].exp),p=3*x,b=.0025*u;t>0&&h.push((0,r.jsxs)("tr",{className:"bg-white hover:bg-gray-100",children:[(0,r.jsx)("td",{className:"px-4 py-2 border-b",children:a}),(0,r.jsx)("td",{className:"px-4 py-2 border-b",children:l}),(0,r.jsx)("td",{className:"px-4 py-2 border-b",children:d(c.toFixed(2))}),(0,r.jsx)("td",{className:"px-4 py-2 border-b",children:d(x.toFixed(0))}),(0,r.jsx)("td",{className:"px-4 py-2 border-b",children:d(p.toFixed(0))}),(0,r.jsx)("td",{className:"px-4 py-2 border-b",children:d(u.toFixed(0))}),(0,r.jsx)("td",{className:"px-4 py-2 border-b",children:d(b.toFixed(0))})]},s))}return h},h=function(){let[e,s]=(0,c.useState)(1e4),[t,l]=(0,c.useState)([,,,,,].fill("")),[a,o]=(0,c.useState)([,,,,,].fill("")),[d,h]=(0,c.useState)(0),[x,u]=(0,c.useState)([]),p=(e,s,r)=>{let n="desired"===e,c=[...n?a:t];c[s]=r,(n?o:l)(c),console.log("Handle Sub",e,s,r,c)},b=(e,s)=>[...n.filter(s=>!e.includes(s)),...""!==s?[s]:[]].sort(),m=async s=>{s.preventDefault(),l(t),o(a);let r=performance.now();console.log("Wololo start");let n=await i(e,t,a);console.log("wololo end",n),u(n);let c=performance.now();console.log("CALCULATE",r,c,c-r),h(c-r)};return console.log("RENDER!"),(0,r.jsxs)("div",{className:"",children:[(0,r.jsxs)("form",{className:"flex flex-col",onSubmit:m,children:[(0,r.jsxs)("div",{className:"flex-col border border-black border-solid",children:[(0,r.jsx)("h3",{children:"Start subs"}),t.map((e,s)=>(0,r.jsxs)("select",{value:e,onChange:e=>p("start",s,e.target.value),children:[(0,r.jsx)("option",{value:""}),b(t,e).map((e,s)=>(0,r.jsx)("option",{value:e,children:e},s))]},s))]}),(0,r.jsxs)("div",{className:"flex-col border border-black border-solid",children:[(0,r.jsx)("h3",{children:"Desired subs"}),a.map((e,s)=>(0,r.jsxs)("select",{value:e,onChange:e=>p("desired",s,e.target.value),children:[(0,r.jsx)("option",{value:""}),b(a,e).map((e,s)=>(0,r.jsx)("option",{value:e,children:e},s))]},s))]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{children:"Simulate count"}),(0,r.jsx)("input",{id:"simulateCount",type:"number",value:e,onChange:e=>s(Number(e.target.value))})]}),(0,r.jsx)("button",{type:"submit",className:"bg-blue-200 w-60",children:"Calculate"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:["Time spent [ms]: ",d||""]}),(0,r.jsxs)("table",{className:"overflow-x-auto bg-white shadow-md rounded-lg",children:[(0,r.jsxs)("thead",{className:"bg-gray-200 text-gray-700",children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-2 border-b",rowSpan:3,children:"Lvl"}),(0,r.jsx)("th",{className:"px-4 py-2 border-b",rowSpan:3,children:"Chance"}),(0,r.jsx)("th",{className:"px-4 py-2 border-b",colSpan:5,children:"Expected"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-2 border-b",rowSpan:2,children:"Attempts"}),(0,r.jsx)("th",{className:"px-4 py-2 border-b",colSpan:2,children:"Tuners"}),(0,r.jsx)("th",{className:"px-4 py-2 border-b",colSpan:2,children:"Echo EXP"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-2 border-b",children:"Count"}),(0,r.jsx)("th",{className:"px-4 py-2 border-b",children:"Waveplates"}),(0,r.jsx)("th",{className:"px-4 py-2 border-b",children:"Count"}),(0,r.jsx)("th",{className:"px-4 py-2 border-b",children:"Waveplates"})]})]}),(0,r.jsx)("tbody",{children:x})]})]})]})};function x(){return(0,r.jsx)(l.default,{children:(0,r.jsx)(h,{})})}},530:(e,s,t)=>{"use strict";t.d(s,{default:()=>h});var r=t(5155),l=t(8173),a=t.n(l);function n(){return(0,r.jsxs)("header",{className:"flex justify-between items-center py-4 border-b",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Wuwa Planner"}),(0,r.jsxs)("nav",{className:"space-x-4",children:[!1,(0,r.jsx)(a(),{href:"/echo-simulation",className:"text-blue-600 hover:underline",children:"Echo Roll Simulator"})]})]})}function o(){return(0,r.jsx)("footer",{className:"mt-12 text-center text-gray-500",children:"\xa9 2025 ayy lmao"})}var c=t(2115);let d=(0,c.createContext)(void 0),i=e=>{let{children:s}=e,[t,l]=(0,c.useState)(null),[a,n]=(0,c.useState)(!0),[o,i]=(0,c.useState)(null);return(0,c.useEffect)(()=>{(async function(){try{let e=await fetch("/data/items.json"),s=await e.json(),t=await fetch("/data/resonator.json"),r=await t.json();console.log("Fetching data"),l({items:s,resonators:r}),console.log("Fetched data:",r),n(!1)}catch(e){e instanceof Error?i(e):i(Error("Unknown error")),n(!1)}})()},[]),(0,r.jsx)(d.Provider,{value:{data:t,loading:a,error:o},children:s})},h=e=>{let{children:s}=e;return(0,r.jsx)(i,{children:(0,r.jsxs)("div",{className:"container mx-auto p-4",children:[(0,r.jsx)(n,{}),(0,r.jsx)("main",{className:"mt-8",children:s}),(0,r.jsx)(o,{})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[173,441,517,358],()=>s(1910)),_N_E=e.O()}]);